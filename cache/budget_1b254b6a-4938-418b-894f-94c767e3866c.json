{
  "timestamp": "2025-09-08T09:33:03.330664",
  "budget": {
    "pool_info": {
      "dimensions": {
        "comprimento": 8.0,
        "largura": 4.0,
        "prof_min": 1.1,
        "prof_max": 1.6
      },
      "metrics": {
        "prof_media": 1.35,
        "volume": 43.2,
        "m3_h": 10.8,
        "m3_massa": 10.73,
        "m2_fundo": 36.96,
        "m2_paredes": 32.4,
        "m2_tela": 72.6,
        "ml_bordadura": 26.0,
        "perimetro": 24.0,
        "rolos_tl": 2,
        "rolos_3d": 3
      },
      "answers": {
        "acesso": "dificil",
        "escavacao": "true",
        "forma": "standard",
        "tipo_piscina": "skimmer",
        "revestimento": "tela",
        "domotica": "true",
        "localizacao": "exterior",
        "luz": "monofasica",
        "tratamento_agua": "clorador_salino_ph_uv",
        "tipo_construcao": "nova",
        "cobertura": "lona",
        "tipo_cobertura_laminas": "",
        "zona_praia": "sim",
        "zona_praia_largura": 1,
        "zona_praia_comprimento": 4,
        "escadas": "sim",
        "escadas_largura": 1,
        "casa_maquinas_abaixo": "nao",
        "casa_maquinas_desc": "",
        "tipo_luzes": "rgb"
      },
      "multiplier": 1.11384,
      "multiplier_breakdown": {
        "geometrico": 1.0,
        "tecnologico": 1.061,
        "mercado": 1.05,
        "final": 1.114
      },
      "transport_costs": {
        "nivel_acesso": "dificil",
        "custo_por_m3": 10.0,
        "custo_transporte_fixo": 500.0,
        "custo_total_m3": 107.3,
        "custo_total": 607.3,
        "m3_massa_usado": 10.73,
        "explicacao": "Acesso difícil ao local da obra",
        "breakdown": [
          {
            "descricao": "Custo por m³ de massa (10.73 m³)",
            "calculo": "10.73 × 10.00€",
            "valor": 107.3
          },
          {
            "descricao": "Custo fixo de transporte",
            "calculo": "500.00€",
            "valor": 500.0
          }
        ]
      }
    },
    "client_data": {
      "clientName": "Patrick Costa",
      "commercialName": "Rui Vaz",
      "date": "2025-09-05",
      "localidade": "Ponte Lima",
      "localidade_outro": "",
      "observations": "",
      "proposalNumber": "PO 001"
    },
    "families": {
      "filtracao": {
        "filter_01_3": {
          "name": "Filtro Aster Astralpool - D.600 14m3/h",
          "price": 676,
          "quantity": 1,
          "unit": "un",
          "item_type": "incluido",
          "reasoning": "Filtro selecionado para piscina exterior com capacidade 10.8 m³/h",
          "can_change_type": true,
          "product_id": 3
        },
        "valve_01_101": {
          "name": "Válvula Selectora Automatica - iWash by aquark",
          "price": 999,
          "quantity": 1,
          "unit": "un",
          "item_type": "incluido",
          "reasoning": "Válvula automática para integração domótica",
          "can_change_type": true,
          "product_id": 101
        },
        "valve_02_100": {
          "name": "Válvula Selectora Manual (ALTERNATIVO)",
          "price": 99,
          "quantity": 1,
          "unit": "un",
          "item_type": "alternativo",
          "reasoning": "Alternativa manual",
          "can_change_type": true,
          "product_id": 100,
          "alternative_to": "valve_01_101"
        },
        "pump_01_12": {
          "name": "Bomba de filtração Vitoria Plus Silent Astralpool - 0,75HP(M) 11m3/h",
          "price": 540,
          "quantity": 1,
          "unit": "un",
          "item_type": "incluido",
          "reasoning": "Bomba padrão: 11m³/h (monofasica)",
          "can_change_type": true,
          "product_id": 12
        },
        "pump_02_8": {
          "name": "Bomba filtração Velocidade Variável InverEco 1.0HP(M) 16m3 By Aquark (ALTERNATIVO)",
          "price": 890,
          "quantity": 1,
          "unit": "un",
          "item_type": "alternativo",
          "reasoning": "Eficiência energética: 16m³/h (velocidade variável)",
          "can_change_type": true,
          "product_id": 8,
          "alternative_to": "pump_01_12"
        },
        "vidro_fino_23_filter_01_3": {
          "name": "Vidro granulado ionizado ativado - granulometria 0,4-1,0mm (Sacos de 20kg)",
          "price": 29.9,
          "quantity": 4,
          "unit": "saco",
          "item_type": "incluido",
          "reasoning": "Vidro filtrante fino: 4 sacos (70% do total de vidro)",
          "can_change_type": false,
          "product_id": 23
        },
        "vidro_grosso_24_filter_01_3": {
          "name": "Vidro granulado ionizado ativado - granulometria 1,5-3,0mm (Sacos de 20kg)",
          "price": 29.9,
          "quantity": 2,
          "unit": "saco",
          "item_type": "incluido",
          "reasoning": "Vidro filtrante grosso: 2 sacos (30% do total de vidro)",
          "can_change_type": false,
          "product_id": 24
        },
        "areia_fina_74_filter_01_3": {
          "name": "Areia Sílica 0,6-1,2mm (25kg)",
          "price": 7.5,
          "quantity": 4,
          "unit": "saco",
          "item_type": "alternativo",
          "reasoning": "Alternativa ao vidro filtrante fino: 4 sacos (areia fina)",
          "alternative_to": "vidro_fino_23_filter_01_3",
          "can_change_type": false,
          "product_id": 74
        },
        "areia_grossa_75_filter_01_3": {
          "name": "Areia Sílica Grossa (25kg)",
          "price": 7.5,
          "quantity": 2,
          "unit": "saco",
          "item_type": "alternativo",
          "reasoning": "Alternativa ao vidro filtrante grosso: 2 sacos (areia grossa)",
          "alternative_to": "vidro_grosso_24_filter_01_3",
          "can_change_type": false,
          "product_id": 75
        }
      },
      "recirculacao_iluminacao": {
        "skimmer_35": {
          "name": "Skimmer Linha de água Branco Liner",
          "price": 210,
          "quantity": 2,
          "unit": "un",
          "item_type": "incluido",
          "reasoning": "Skimmers para piscina skimmer 4.0m de largura",
          "can_change_type": true
        },
        "boca_impulsao_43": {
          "name": "Boca de Impulsão de parede Astralpool Liner",
          "price": 14.25,
          "quantity": 3,
          "unit": "un",
          "item_type": "incluido",
          "reasoning": "Bocas de impulsão para piscina 4.0m de largura",
          "can_change_type": true
        },
        "tomada_aspiracao_51": {
          "name": "Tomada de Aspiração Astralpool Liner",
          "price": 23.3,
          "quantity": 1,
          "unit": "un",
          "item_type": "incluido",
          "reasoning": "Tomada de aspiração padrão",
          "can_change_type": true
        },
        "passamuros_54": {
          "name": "Passamuros Astralpool Liner",
          "price": 13.9,
          "quantity": 4,
          "unit": "un",
          "item_type": "incluido",
          "reasoning": "Passamuros para instalação (4 unidades)",
          "can_change_type": true
        },
        "regulador_nivel_58": {
          "name": "Regulador de Nível Astralpool",
          "price": 199,
          "quantity": 1,
          "unit": "un",
          "item_type": "incluido",
          "reasoning": "Regulador de nível para piscina skimmer",
          "can_change_type": true
        },
        "regulador_pack_boca_43": {
          "name": "    [Pack] Boca de Impulsão de parede Astralpool Liner (Pack Regulador)",
          "price": 14.25,
          "quantity": 1,
          "unit": "un",
          "item_type": "incluido",
          "reasoning": "Boca impulsão adicional para regulador de nível",
          "can_change_type": false,
          "pack_parent": "regulador_nivel_58",
          "is_pack_item": true,
          "pack_style": "indented"
        },
        "regulador_pack_passamuro_54": {
          "name": "    [Pack] Passamuros Astralpool Liner (Pack Regulador)",
          "price": 13.9,
          "quantity": 1,
          "unit": "un",
          "item_type": "incluido",
          "reasoning": "Passamuro adicional para regulador de nível",
          "can_change_type": false,
          "pack_parent": "regulador_nivel_58",
          "is_pack_item": true,
          "pack_style": "indented"
        },
        "ralo_fundo_60": {
          "name": "Ralo de fundo Kripsol Liner",
          "price": 46.35,
          "quantity": 1,
          "unit": "un",
          "item_type": "incluido",
          "reasoning": "Ralo de fundo para piscina 32.0m² (tela)",
          "can_change_type": true
        },
        "iluminacao_72": {
          "name": "Projector Led Luz RGB de 100mm",
          "price": 423,
          "quantity": 3,
          "unit": "un",
          "item_type": "incluido",
          "reasoning": "Iluminação para piscina 8.0x4.0m (rgb)",
          "can_change_type": true
        }
      },
      "tratamento_agua": {
        "sal_granulado_refinado": {
          "name": "Sal Granulado Refinado",
          "price": 9.9,
          "quantity": 11,
          "unit": "un",
          "item_type": "incluido",
          "reasoning": "Quantidade calculada para 43.2 m³ de piscina",
          "can_change_type": false
        },
        "mr_pure": {
          "name": "Mr. Pure 50m3 By Aquark",
          "price": 1750,
          "quantity": 1,
          "unit": "un",
          "item_type": "incluido",
          "reasoning": "Clorador salino + PH selecionado para 43.2 m³",
          "can_change_type": false
        },
        "uv_titan": {
          "name": "Sistema UV-C Titan 40w 18m3/h By Filtreau",
          "price": 890,
          "quantity": 1,
          "unit": "un",
          "item_type": "incluido",
          "reasoning": "Sistema UV selecionado para 10.8 m³/h",
          "can_change_type": false
        },
        "protecao_anodica": {
          "name": "Proteção Anódica",
          "price": 99,
          "quantity": 1,
          "unit": "un",
          "item_type": "incluido",
          "reasoning": "Proteção anódica incluída com clorador salino + PH + UV",
          "can_change_type": false
        }
      },
      "revestimento": {
        "tela_armada": {
          "name": "Revestimento Tela Armada 3D Unicolor CGT",
          "price": 1799.8,
          "quantity": 2,
          "unit": "Vg",
          "item_type": "incluido",
          "reasoning": "Quantidade calculada: 2 rolos de 25m cada",
          "can_change_type": true,
          "alternatives": [
            {
              "id": 95,
              "name": "Revestimento Tela Armada 3D CGT",
              "price": 2428.8
            },
            {
              "id": 96,
              "name": "Revestimento Tela Armada Lisa CGT",
              "price": 1760
            }
          ],
          "product_id": 94
        },
        "perfil": {
          "name": "Perfil Horizontal de Fixação (2ml)",
          "price": 5.25,
          "quantity": 13,
          "unit": "un",
          "item_type": "incluido",
          "reasoning": "Perfil horizontal: 13 un (2ml cada)",
          "can_change_type": true,
          "alternatives": [
            {
              "id": 99,
              "name": "Chapa Colaminada",
              "price": 7.5
            }
          ],
          "product_id": 97
        },
        "chapa_colaminada": {
          "name": "Chapa Colaminada",
          "price": 7.5,
          "quantity": 13,
          "unit": "un",
          "item_type": "alternativo",
          "reasoning": "Alternativa à horizontal: 13 un (2ml cada)",
          "alternative_to": "perfil",
          "can_change_type": false,
          "product_id": 99
        }
      },
      "aquecimento": {
        "bomba_calor_105": {
          "name": "Mr. Comfort 130M (12.6kW, 30-60m3)",
          "price": 2386.35,
          "quantity": 1,
          "unit": "UN",
          "item_type": "incluido",
          "reasoning": "Bomba de calor selecionada para piscina de 43.2 m³",
          "can_change_type": true,
          "editable_price": false,
          "editable_name": false
        },
        "bomba_calor_fairland_109": {
          "name": "Fairland InverX20 X20-14 (14kW, 30-50m³)",
          "price": 2900,
          "quantity": 1,
          "unit": "UN",
          "item_type": "alternativo",
          "alternative_to": "bomba_calor_105",
          "reasoning": "Bomba de calor Fairland - Gama Superior alternativa para piscina de 43.2 m³",
          "can_change_type": true,
          "editable_price": false,
          "editable_name": false
        }
      },
      "construcao": {
        "bloco_cofragem": {
          "name": "Bloco Cofragem 50x20x20",
          "price": 1.1033333333333333,
          "quantity": 324,
          "unit": "un",
          "item_type": "incluido",
          "reasoning": "10 blocos por m² de parede (32.40 m²)",
          "can_change_type": true
        },
        "bloco_normal": {
          "name": "Bloco Normal 50x20x20",
          "price": 0.9391666666666666,
          "quantity": 20,
          "unit": "un",
          "item_type": "incluido",
          "reasoning": "Para escadas: (1/0,2) × ((1.1-0,3)/0,2)",
          "can_change_type": true
        },
        "cimento": {
          "name": "Cimento Cimpor 32,5R",
          "price": 3.8625000000000003,
          "quantity": 107.30000000000001,
          "unit": "un",
          "item_type": "incluido",
          "reasoning": "10 sacos por m³ de massa (10.73 m³)",
          "can_change_type": true
        },
        "mistura": {
          "name": "Mistura",
          "price": 30.850000000000005,
          "quantity": 10.73,
          "unit": "m3",
          "item_type": "incluido",
          "reasoning": "1 m³ por m³ de massa (10.73 m³)",
          "can_change_type": true
        },
        "malha_eletrosoldada": {
          "name": "Malha Eletrosoldada 6mm",
          "price": 2.729166666666666,
          "quantity": 32.4,
          "unit": "m2",
          "item_type": "incluido",
          "reasoning": "Igual a m² de paredes (32.40 m²)",
          "can_change_type": true
        },
        "heliaco": {
          "name": "Heliaço 10mm 6m",
          "price": 3.624166666666666,
          "quantity": 104,
          "unit": "un",
          "item_type": "incluido",
          "reasoning": "Barras verticais: 40.0 + Barras horizontais: 64.0",
          "can_change_type": true
        },
        "arame_queimado": {
          "name": "Arame Queimado",
          "price": 2.5,
          "quantity": 2,
          "unit": "kg",
          "item_type": "incluido",
          "reasoning": "Quantidade fixa: 2 kg",
          "can_change_type": true
        },
        "meia_areia": {
          "name": "Meia Areia",
          "price": 30.045,
          "quantity": 1,
          "unit": "m3",
          "item_type": "incluido",
          "reasoning": "Quantidade fixa: 1 m³",
          "can_change_type": true
        },
        "reboco_exterior": {
          "name": "Reboco Exterior Cinza",
          "price": 2.676666666666667,
          "quantity": 19.439999999999998,
          "unit": "un",
          "item_type": "incluido",
          "reasoning": "0,6 sacos por m² de parede (32.40 m²)",
          "can_change_type": true
        },
        "vigas": {
          "name": "Viga",
          "price": 2.723333333333333,
          "quantity": 8.692307692307692,
          "unit": "m",
          "item_type": "incluido",
          "reasoning": "Zona praia: ((4.0/0,52)+1) × 1",
          "can_change_type": true
        },
        "abobadilhas": {
          "name": "Abobadilhas 40cm",
          "price": 0.6774999999999999,
          "quantity": 21.73076923076923,
          "unit": "un",
          "item_type": "incluido",
          "reasoning": "(1/0,40) × 8.7 vigas",
          "can_change_type": true
        },
        "tela_pitonada": {
          "name": "Tela Pitonada",
          "price": 1.5,
          "quantity": 32.400000000000006,
          "unit": "m2",
          "item_type": "incluido",
          "reasoning": "Perímetro × prof. média: 24.00 × 1.35",
          "can_change_type": true
        },
        "brita_n2": {
          "name": "Brita nº2",
          "price": 29.87666666666667,
          "quantity": 2,
          "unit": "m3",
          "item_type": "incluido",
          "reasoning": "M² fundo × 0,05: 36.96 × 0,05 (arredondado)",
          "can_change_type": true
        }
      }
    },
    "family_totals": {
      "filtracao": 2666.98,
      "recirculacao_iluminacao": 2321.41,
      "tratamento_agua": 3172.1,
      "revestimento": 4085.4,
      "aquecimento": 2658.01,
      "construcao": 2028.19
    },
    "total_price": 17539.39,
    "family_display_map": {
      "filtracao": "Filtração",
      "recirculacao_iluminacao": "Recirculação e Iluminação",
      "tratamento_agua": "Tratamento de Água",
      "revestimento": "Revestimento",
      "aquecimento": "Aquecimento",
      "construcao": "Construção da Piscina"
    },
    "transport_cost": 607.3,
    "subtotal_products": 16932.09
  }
}