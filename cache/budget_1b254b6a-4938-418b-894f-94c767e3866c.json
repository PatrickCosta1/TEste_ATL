{
  "timestamp": "2025-09-08T09:46:37.363649",
  "budget": {
    "pool_info": {
      "dimensions": {
        "comprimento": 8.0,
        "largura": 5.0,
        "prof_min": 1.1,
        "prof_max": 1.6
      },
      "metrics": {
        "prof_media": 1.35,
        "volume": 54.0,
        "m3_h": 13.5,
        "m3_massa": 12.42,
        "m2_fundo": 45.36,
        "m2_paredes": 35.1,
        "m2_tela": 84.15,
        "ml_bordadura": 28.0,
        "perimetro": 26.0,
        "rolos_tl": 3,
        "rolos_3d": 3
      },
      "answers": {
        "acesso": "dificil",
        "escavacao": "false",
        "forma": "standard",
        "tipo_piscina": "skimmer",
        "revestimento": "tela",
        "domotica": "true",
        "localizacao": "interior",
        "luz": "monofasica",
        "tratamento_agua": "clorador_salino_ph_uv",
        "tipo_construcao": "nova",
        "cobertura": "bolhas",
        "tipo_cobertura_laminas": "",
        "zona_praia": "sim",
        "zona_praia_largura": 1,
        "zona_praia_comprimento": 5,
        "escadas": "sim",
        "escadas_largura": 1,
        "casa_maquinas_abaixo": "sim",
        "casa_maquinas_desc": "",
        "tipo_luzes": "rgb"
      },
      "multiplier": 1.092,
      "multiplier_breakdown": {
        "geometrico": 1.0,
        "tecnologico": 1.04,
        "mercado": 1.05,
        "final": 1.092
      },
      "transport_costs": {
        "nivel_acesso": "dificil",
        "custo_por_m3": 10.0,
        "custo_transporte_fixo": 500.0,
        "custo_total_m3": 124.2,
        "custo_total": 624.2,
        "m3_massa_usado": 12.42,
        "explicacao": "Acesso difícil ao local da obra",
        "breakdown": [
          {
            "descricao": "Custo por m³ de massa (12.42 m³)",
            "calculo": "12.42 × 10.00€",
            "valor": 124.2
          },
          {
            "descricao": "Custo fixo de transporte",
            "calculo": "500.00€",
            "valor": 500.0
          }
        ]
      }
    },
    "client_data": {
      "clientName": "Patrick Costa",
      "commercialName": "Rui Vaz",
      "date": "2025-09-08",
      "localidade": "Estarreja",
      "localidade_outro": "",
      "observations": "",
      "proposalNumber": "PO 001"
    },
    "families": {
      "filtracao": {
        "filter_01_3": {
          "name": "Filtro Aster Astralpool - D.600 14m3/h",
          "price": 676,
          "quantity": 1,
          "unit": "un",
          "item_type": "incluido",
          "reasoning": "Filtro selecionado para piscina interior com capacidade 13.5 m³/h",
          "can_change_type": true,
          "product_id": 3
        },
        "valve_01_101": {
          "name": "Válvula Selectora Automatica - iWash by aquark",
          "price": 999,
          "quantity": 1,
          "unit": "un",
          "item_type": "incluido",
          "reasoning": "Válvula automática para integração domótica",
          "can_change_type": true,
          "product_id": 101
        },
        "valve_02_100": {
          "name": "Válvula Selectora Manual (ALTERNATIVO)",
          "price": 99,
          "quantity": 1,
          "unit": "un",
          "item_type": "alternativo",
          "reasoning": "Alternativa manual",
          "can_change_type": true,
          "product_id": 100,
          "alternative_to": "valve_01_101"
        },
        "pump_01_13": {
          "name": "Bomba de filtração Vitoria Plus Silent Astralpool - 1,0HP(M) 16m3/h",
          "price": 555,
          "quantity": 1,
          "unit": "un",
          "item_type": "incluido",
          "reasoning": "Bomba padrão: 16m³/h (monofasica)",
          "can_change_type": true,
          "product_id": 13
        },
        "pump_02_8": {
          "name": "Bomba filtração Velocidade Variável InverEco 1.0HP(M) 16m3 By Aquark (ALTERNATIVO)",
          "price": 890,
          "quantity": 1,
          "unit": "un",
          "item_type": "alternativo",
          "reasoning": "Eficiência energética: 16m³/h (velocidade variável)",
          "can_change_type": true,
          "product_id": 8,
          "alternative_to": "pump_01_13"
        },
        "vidro_fino_23_filter_01_3": {
          "name": "Vidro granulado ionizado ativado - granulometria 0,4-1,0mm (Sacos de 20kg)",
          "price": 29.9,
          "quantity": 4,
          "unit": "saco",
          "item_type": "incluido",
          "reasoning": "Vidro filtrante fino: 4 sacos (70% do total de vidro)",
          "can_change_type": false,
          "product_id": 23
        },
        "vidro_grosso_24_filter_01_3": {
          "name": "Vidro granulado ionizado ativado - granulometria 1,5-3,0mm (Sacos de 20kg)",
          "price": 29.9,
          "quantity": 2,
          "unit": "saco",
          "item_type": "incluido",
          "reasoning": "Vidro filtrante grosso: 2 sacos (30% do total de vidro)",
          "can_change_type": false,
          "product_id": 24
        },
        "areia_fina_74_filter_01_3": {
          "name": "Areia Sílica 0,6-1,2mm (25kg)",
          "price": 7.5,
          "quantity": 4,
          "unit": "saco",
          "item_type": "alternativo",
          "reasoning": "Alternativa ao vidro filtrante fino: 4 sacos (areia fina)",
          "alternative_to": "vidro_fino_23_filter_01_3",
          "can_change_type": false,
          "product_id": 74
        },
        "areia_grossa_75_filter_01_3": {
          "name": "Areia Sílica Grossa (25kg)",
          "price": 7.5,
          "quantity": 2,
          "unit": "saco",
          "item_type": "alternativo",
          "reasoning": "Alternativa ao vidro filtrante grosso: 2 sacos (areia grossa)",
          "alternative_to": "vidro_grosso_24_filter_01_3",
          "can_change_type": false,
          "product_id": 75
        }
      },
      "recirculacao_iluminacao": {
        "skimmer_35": {
          "name": "Skimmer Linha de água Branco Liner",
          "price": 210,
          "quantity": 2,
          "unit": "un",
          "item_type": "incluido",
          "reasoning": "Skimmers para piscina skimmer 5.0m de largura",
          "can_change_type": true
        },
        "boca_impulsao_43": {
          "name": "Boca de Impulsão de parede Astralpool Liner",
          "price": 14.25,
          "quantity": 4,
          "unit": "un",
          "item_type": "incluido",
          "reasoning": "Bocas de impulsão para piscina 5.0m de largura",
          "can_change_type": true
        },
        "tomada_aspiracao_51": {
          "name": "Tomada de Aspiração Astralpool Liner",
          "price": 23.3,
          "quantity": 1,
          "unit": "un",
          "item_type": "incluido",
          "reasoning": "Tomada de aspiração padrão",
          "can_change_type": true
        },
        "passamuros_54": {
          "name": "Passamuros Astralpool Liner",
          "price": 13.9,
          "quantity": 5,
          "unit": "un",
          "item_type": "incluido",
          "reasoning": "Passamuros para instalação (5 unidades)",
          "can_change_type": true
        },
        "regulador_nivel_58": {
          "name": "Regulador de Nível Astralpool",
          "price": 199,
          "quantity": 1,
          "unit": "un",
          "item_type": "incluido",
          "reasoning": "Regulador de nível para piscina skimmer",
          "can_change_type": true
        },
        "regulador_pack_boca_43": {
          "name": "    [Pack] Boca de Impulsão de parede Astralpool Liner (Pack Regulador)",
          "price": 14.25,
          "quantity": 1,
          "unit": "un",
          "item_type": "incluido",
          "reasoning": "Boca impulsão adicional para regulador de nível",
          "can_change_type": false,
          "pack_parent": "regulador_nivel_58",
          "is_pack_item": true,
          "pack_style": "indented"
        },
        "regulador_pack_passamuro_54": {
          "name": "    [Pack] Passamuros Astralpool Liner (Pack Regulador)",
          "price": 13.9,
          "quantity": 1,
          "unit": "un",
          "item_type": "incluido",
          "reasoning": "Passamuro adicional para regulador de nível",
          "can_change_type": false,
          "pack_parent": "regulador_nivel_58",
          "is_pack_item": true,
          "pack_style": "indented"
        },
        "ralo_fundo_60": {
          "name": "Ralo de fundo Kripsol Liner",
          "price": 46.35,
          "quantity": 1,
          "unit": "un",
          "item_type": "incluido",
          "reasoning": "Ralo de fundo para piscina 40.0m² (tela)",
          "can_change_type": true
        },
        "iluminacao_73": {
          "name": "Projector Led Luz RGB de 170mm",
          "price": 480,
          "quantity": 3,
          "unit": "un",
          "item_type": "incluido",
          "reasoning": "Iluminação para piscina 8.0x5.0m (rgb)",
          "can_change_type": true
        }
      },
      "tratamento_agua": {
        "sal_granulado_refinado": {
          "name": "Sal Granulado Refinado",
          "price": 9.9,
          "quantity": 13,
          "unit": "un",
          "item_type": "incluido",
          "reasoning": "Quantidade calculada para 54.0 m³ de piscina",
          "can_change_type": false
        },
        "mr_pure": {
          "name": "Mr. Pure 90m3 By Aquark",
          "price": 1850,
          "quantity": 1,
          "unit": "un",
          "item_type": "incluido",
          "reasoning": "Clorador salino + PH selecionado para 54.0 m³",
          "can_change_type": false
        },
        "uv_titan": {
          "name": "Sistema UV-C Titan 40w 18m3/h By Filtreau",
          "price": 890,
          "quantity": 1,
          "unit": "un",
          "item_type": "incluido",
          "reasoning": "Sistema UV selecionado para 13.5 m³/h",
          "can_change_type": false
        },
        "protecao_anodica": {
          "name": "Proteção Anódica",
          "price": 99,
          "quantity": 1,
          "unit": "un",
          "item_type": "incluido",
          "reasoning": "Proteção anódica incluída com clorador salino + PH + UV",
          "can_change_type": false
        }
      },
      "revestimento": {
        "tela_armada": {
          "name": "Revestimento Tela Armada 3D Unicolor CGT",
          "price": 1799.8,
          "quantity": 2,
          "unit": "Vg",
          "item_type": "incluido",
          "reasoning": "Quantidade calculada: 2 rolos de 25m cada",
          "can_change_type": true,
          "alternatives": [
            {
              "id": 95,
              "name": "Revestimento Tela Armada 3D CGT",
              "price": 2428.8
            },
            {
              "id": 96,
              "name": "Revestimento Tela Armada Lisa CGT",
              "price": 1760
            }
          ],
          "product_id": 94
        },
        "perfil": {
          "name": "Perfil Horizontal de Fixação (2ml)",
          "price": 5.25,
          "quantity": 14,
          "unit": "un",
          "item_type": "incluido",
          "reasoning": "Perfil horizontal: 14 un (2ml cada)",
          "can_change_type": true,
          "alternatives": [
            {
              "id": 99,
              "name": "Chapa Colaminada",
              "price": 7.5
            }
          ],
          "product_id": 97
        },
        "chapa_colaminada": {
          "name": "Chapa Colaminada",
          "price": 7.5,
          "quantity": 14,
          "unit": "un",
          "item_type": "alternativo",
          "reasoning": "Alternativa à horizontal: 14 un (2ml cada)",
          "alternative_to": "perfil",
          "can_change_type": false,
          "product_id": 99
        }
      },
      "aquecimento": {
        "bomba_calor_106": {
          "name": "Mr. Comfort 160M (16.1kW, 40-75m3)",
          "price": 3054.52,
          "quantity": 1,
          "unit": "UN",
          "item_type": "incluido",
          "reasoning": "Bomba de calor selecionada para piscina de 54.0 m³",
          "can_change_type": true,
          "editable_price": false,
          "editable_name": false
        },
        "bomba_calor_fairland_110": {
          "name": "Fairland InverX20 X20-18 (18kW, 40-65m³)",
          "price": 3400,
          "quantity": 1,
          "unit": "UN",
          "item_type": "alternativo",
          "alternative_to": "bomba_calor_106",
          "reasoning": "Bomba de calor Fairland - Gama Superior alternativa para piscina de 54.0 m³",
          "can_change_type": true,
          "editable_price": false,
          "editable_name": false
        }
      },
      "construcao": {
        "bloco_cofragem": {
          "name": "Bloco Cofragem 50x20x20",
          "price": 1.1033333333333333,
          "quantity": 351,
          "unit": "un",
          "item_type": "incluido",
          "reasoning": "10 blocos por m² de parede (35.10 m²)",
          "can_change_type": true
        },
        "bloco_normal": {
          "name": "Bloco Normal 50x20x20",
          "price": 0.9391666666666666,
          "quantity": 20,
          "unit": "un",
          "item_type": "incluido",
          "reasoning": "Para escadas: (1/0,2) × ((1.1-0,3)/0,2)",
          "can_change_type": true
        },
        "cimento": {
          "name": "Cimento Cimpor 32,5R",
          "price": 3.8625000000000003,
          "quantity": 124.2,
          "unit": "un",
          "item_type": "incluido",
          "reasoning": "10 sacos por m³ de massa (12.42 m³)",
          "can_change_type": true
        },
        "mistura": {
          "name": "Mistura",
          "price": 30.850000000000005,
          "quantity": 12.42,
          "unit": "m3",
          "item_type": "incluido",
          "reasoning": "1 m³ por m³ de massa (12.42 m³)",
          "can_change_type": true
        },
        "malha_eletrosoldada": {
          "name": "Malha Eletrosoldada 6mm",
          "price": 2.729166666666666,
          "quantity": 35.1,
          "unit": "m2",
          "item_type": "incluido",
          "reasoning": "Igual a m² de paredes (35.10 m²)",
          "can_change_type": true
        },
        "heliaco": {
          "name": "Heliaço 10mm 6m",
          "price": 3.624166666666666,
          "quantity": 113,
          "unit": "un",
          "item_type": "incluido",
          "reasoning": "Barras verticais: 43.3 + Barras horizontais: 69.3",
          "can_change_type": true
        },
        "arame_queimado": {
          "name": "Arame Queimado",
          "price": 2.5,
          "quantity": 2,
          "unit": "kg",
          "item_type": "incluido",
          "reasoning": "Quantidade fixa: 2 kg",
          "can_change_type": true
        },
        "meia_areia": {
          "name": "Meia Areia",
          "price": 30.045,
          "quantity": 1,
          "unit": "m3",
          "item_type": "incluido",
          "reasoning": "Quantidade fixa: 1 m³",
          "can_change_type": true
        },
        "reboco_exterior": {
          "name": "Reboco Exterior Cinza",
          "price": 2.676666666666667,
          "quantity": 21.06,
          "unit": "un",
          "item_type": "incluido",
          "reasoning": "0,6 sacos por m² de parede (35.10 m²)",
          "can_change_type": true
        },
        "vigas": {
          "name": "Viga",
          "price": 2.723333333333333,
          "quantity": 10.615384615384615,
          "unit": "m",
          "item_type": "incluido",
          "reasoning": "Zona praia: ((5.0/0,52)+1) × 1",
          "can_change_type": true
        },
        "abobadilhas": {
          "name": "Abobadilhas 40cm",
          "price": 0.6774999999999999,
          "quantity": 26.538461538461537,
          "unit": "un",
          "item_type": "incluido",
          "reasoning": "(1/0,40) × 10.6 vigas",
          "can_change_type": true
        },
        "tela_pitonada": {
          "name": "Tela Pitonada",
          "price": 1.5,
          "quantity": 35.1,
          "unit": "m2",
          "item_type": "incluido",
          "reasoning": "Perímetro × prof. média: 26.00 × 1.35",
          "can_change_type": true
        },
        "brita_n2": {
          "name": "Brita nº2",
          "price": 29.87666666666667,
          "quantity": 3,
          "unit": "m3",
          "item_type": "incluido",
          "reasoning": "M² fundo × 0,05: 45.36 × 0,05 (arredondado)",
          "can_change_type": true
        }
      }
    },
    "family_totals": {
      "filtracao": 2631.06,
      "recirculacao_iluminacao": 2493.36,
      "tratamento_agua": 3240.73,
      "revestimento": 4011.03,
      "aquecimento": 3335.54,
      "construcao": 2243.89
    },
    "total_price": 18579.81,
    "family_display_map": {
      "filtracao": "Filtração",
      "recirculacao_iluminacao": "Recirculação e Iluminação",
      "tratamento_agua": "Tratamento de Água",
      "revestimento": "Revestimento",
      "aquecimento": "Aquecimento",
      "construcao": "Construção da Piscina"
    },
    "transport_cost": 624.2,
    "subtotal_products": 17955.61
  }
}